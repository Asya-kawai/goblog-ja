+++
date = "2015-02-04T14:49:44+09:00"
draft = false
title = "package names"
url = "package-names.html"
+++

# パッケージ名

## 序文

Goのコードはパッケージの形で整理されています。同一パッケージ内では、どのような識別子（名前）も
参照することが可能ですが、そのパッケージを利用する場合は、パッケージが外部に公開している型、関数、
定数、変数しか参照できません。パッケージの参照元は常に接頭辞としてパッケージ名を付ける必要があります。
例えば、 `foo.Bar` はインポートしている `foo` というパッケージ内の `Bar` という公開された名前を
参照しています。

良いパッケージ名はコードをより良いものにします。パッケージ名は、その中身の文脈を教えてくれ、参照元で
利用しているパッケージの目的と使用方法を理解しやすくしてくれます。またパッケージ名は、次第にそれが
大きくなるにつれて、メンテナーに何がそのパッケージに入るべきで、何が入るべきでないかを決定する手助けとなります。
良い名前を付けられたパッケージは必要なコードも探しやすくなります。

Effective Goではパッケージ、型、関数、変数の命名に関する
[ガイドライン](https://golang.org/doc/effective_go.html#names) を提供しています。
この文章ではそちらに書かれている内容をさらに発展させて、標準パッケージ内で見られる
名前について調べてみようと思います。また悪いパッケージ名についても議論し、その修正方法についても
考えてみましょう。

## パッケージ名

良いパッケージ名は短くて明確です。小文字で、アンダースコア（ `under_score` ）がなく、
大文字小文字が混ざったもの（ `mixedCaps` ）でもありません。簡潔な名詞であることが多いです。
たとえば次のようなものが挙げられます。

* `time` （時間や時刻を計測したり表示する機能を提供している）
* `list` （双方向リストを実装している）
* `http` （HTTPクライアントとサーバの実装を提供している）

他の言語で典型的な命名規則はGoのプログラムではおそらく自然なものではないでしょう。
ここに、他言語では良いスタイルとされているけれどGoでは不適切なパッケージ名の2つ例を挙げてみます。

* `computeServiceClient`
* `priority_queue`

Goのパッケージではいくつかの型や関数を公開する方法をとっています。たとえば `compute` パッケージでは
`Client` 型とサービスを使うためにメソッドを公開したり、複数のクライアント間での処理を分割するために
関数を公開することもできるでしょう。

**短縮形は慎重にを使うこと。** パッケージ名ではプログラマによく知られた短縮形であれば使ってもよいでしょう。
広く使われるパッケージ名はしばしば短縮形の名前になっています。

* `strconv` （string conversion、文字列の変換）
* `syscall` （system call、システムコール）
* `fmt` （formmated I/O）

一方で、パッケージ名を短くしたせいでそのパッケージが曖昧であったり不明瞭になるようであれば、短縮をめましょう。

**ユーザから良い名前をとってしまわないようにしましょう。** クライアント側のコード内でよく使われる名前をパッケージ名に
するのはやめましょう。たとえば、バッファ済みI/Oのパッケージは `bufio` であり、 `buf` ではありません。
これは `buf` がバッファ用の変数名として都合が良いものだからです。

## パッケージ内の要素の命名

クライアント側ではパッケージ名とそのパッケージ内の要素の名前を一緒に使うので、両者は対をなすものです。
パッケージを設計する際には、クライアントで利用されるときのことを考えましょう。

**どもった名前を避けましょう。** クライアント側ではパッケージの要素を参照する際にパッケージ名を接頭辞として使うので、
そのような要素ではパッケージ名を繰り返さないようにしましょう。 `http` パッケージで提供されるHTTPサーバは `Server` であり、
`HTTPServer` ではありません。クライアント側ではこの要素を `http.Server` という形で参照するので、曖昧さはありません。
