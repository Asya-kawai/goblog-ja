+++
date = "2015-01-12T12:00:00+09:00"
draft = false
title = "エラーは値"
+++

# エラーは値

Goプログラマ、特にまだGoに不慣れな開発者に共通する議論の話題といえば、エラー処理の方法でしょう。
議論が次のようなコードの連続になることを嘆く結論に至ることがしばしばあります。

```
if err != nil {
    return err
}
```

先日、確認できるすべてのオープンソースプロジェクトをスキャンしてみたところ、このスニペットは
先のような開発者が信じているほどではなく、せいぜい1ページに1つか2つ現れる程度であることがわかりました。
それでもなお、いつも次のイディオムをタイプしなければいけないと強く信じているのであれば、
それは何かが間違っていますし、明らかに問題の対象はGoそれ自信となってしまいます。

```
if err != nil
```

これは不幸なことですし、語弊があり、そして容易に訂正が可能なことです。
おそらく、そのように信じてしまっているような状況になったのは、信じているプログラマがGoを使い始めて
まだ日が浅く、「エラーをどう処理したらよいか」という問いに対して、このパターンを覚えて、
そこで止まってしまっているのだと思います。他の言語ではtry-catch節や他の同様のエラー処理機構を
使っているのでしょう。それゆえ、そのプログラマは、私が古い言語ではtry-catch節を使っていたような場合でも、
Goではただ `if err != nil` と打っていると考えているのでしょう。時間が経つにつれて、
Goではこのようなスニペットが蔓延しだし、その結果不格好になってしまいました。

この表現がしっくり来るかどうかはわかりませんが、こういったGoプログラマはエラーに関して根本的な点を
見失っています。 _エラーは値です。_
